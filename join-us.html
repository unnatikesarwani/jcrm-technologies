<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JCRM Technologies — Join Us</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>

  <style>
    /* === Header / nav / hero styles  === */
    html { scroll-behavior: smooth; }
    body { font-family: 'Segoe UI', sans-serif; background: #fff; margin:0; color:#111; }
    .custom-header { background-color: white; }
    .brand-left { display:flex; align-items:center; }
    .brand-left img { height:50px; width:50px; border-radius:50%; margin-right: 10px; }
    .brand-left span { color:black; font-size:1.6rem; font-weight:700; white-space:nowrap; }
    .navbar-section { background-color:#212529; width:100%; }
    .navbar-nav { display:flex; gap:40px; justify-content:center; padding:10px 0; }
    .navbar-nav .nav-link { color:white; font-weight:500; font-size:1rem; text-transform:uppercase; }
    .footer {
      background-color: #212529;
      color: #fff;
      padding: 40px 0;
    }

    .footer .social-icons a {
      color: #fff;
      margin: 0 10px;
      font-size: 1.5rem;
      transition: color 0.3s;
    }

    .footer .social-icons a:hover {
      color: #fd210d;
    }

    .hero {
      background: url('1st BACKGROUND.jpg') no-repeat center center/cover;
      color: white;
      padding: 80px 0;
      text-align: center;
      position: relative;
    }
    .hero::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(4, 2, 2, 0.5);
      z-index: 1;
    }
    .hero .container { position: relative; z-index: 2; }
    .hero h1 { font-size: 2.8rem; font-weight: bold; }
    .hero p {
      font-size: 1.2rem; margin-top:15px; font-weight:bold; line-height:1.7; letter-spacing:0.5px;
      font-family: 'Segoe UI Semibold', 'Segoe UI', sans-serif;
    }
    
    @media (max-width: 991px) {
      .navbar-nav { flex-direction: column; gap: 10px; }
      .navbar-collapse { background-color: #212529; padding: 10px 0; }
      .brand-left span { font-size: 1.4rem; }
    }
    .section-title { font-weight:600; margin-bottom:20px; }

    :root{
      --hero-start: #2b3aeb;
      --hero-end: #1e293b;
      --accent: #5b7cfa;
      --muted: #6b7280;
      --card-radius: 14px;
      --maxw: 1150px;
    }

    /* assistant hero */
    .assistant-hero {
      background: linear-gradient(180deg, var(--hero-start) 6%, var(--hero-end) 70%);
      color: #fff;
      padding: clamp(44px,8vw,84px) 16px;
      overflow:hidden;
    }
    .assistant-hero .inner { max-width: var(--maxw); margin: 0 auto; display:grid; gap:16px; align-items:center; }
    .assistant-hero h2 { margin:0; font-size:clamp(20px,4.6vw,36px); font-weight:800; line-height:1.04; text-shadow: 0 6px 22px rgba(11,17,34,0.35); }
    .assistant-hero p { margin:0; color: rgba(248,250,252,0.94); font-size:clamp(13px,2.1vw,17px); max-width:980px; line-height:1.45; }
    .assistant-hero .cta { margin-top:12px; display:flex; gap:12px; flex-wrap:wrap; }
    .cta .btn-primary-s {
      background: linear-gradient(90deg,#ffd166,#f97316);
      color:#071024; font-weight:800; padding:10px 16px; border-radius:999px; border:none;
      box-shadow:0 12px 30px rgba(249,115,22,0.12);
    }
    .cta .btn-ghost-s {
      background:transparent; border:1px solid rgba(255,255,255,0.14); color:#fff; padding:10px 16px; border-radius:999px; font-weight:700;
    }

    /* main content container */
    main.about-main { max-width: var(--maxw); margin: 28px auto; padding: 12px; }

    /* polished section blocks while preserving structure & images */
    .about-block {
      display:flex; gap:26px; align-items:center; margin-bottom:40px; flex-wrap:wrap;
      padding:18px; border-radius:12px; background: linear-gradient(180deg,#fff,#fbfdff);
      box-shadow: 0 12px 30px rgba(11,17,34,0.04);
    }
    .about-block .about-img {
      flex: 0 0 300px; width:300px; height:300px; border-radius:50%; overflow:hidden;
      border:10px solid var(--accent);
    }
    .about-block .about-img img { width:100%; height:100%; object-fit:cover; display:block; }
    .about-block .about-text { flex:1; min-width:260px; color:#0b1226; }
    .about-block h3 { margin-top:0; color:var(--accent); font-weight:800; letter-spacing: .5px; }
    .about-block p { margin:8px 0; color:var(--muted); font-weight:500; line-height:1.6; }
    .about-block ul { margin:8px 0 0 18px; color:var(--muted); }

    /* Make image border thinner on small screens so circles fit */
    @media (max-width:768px){
      .about-block { padding:12px; }
      .about-block .about-img { width:200px; height:200px; border-width:8px; flex-basis:200px; }
      .assistant-hero { padding: clamp(30px,10vw,56px) 12px; }
    }

    /* subtle hover for blocks */
    .about-block:hover{ transform: translateY(-6px); transition: transform .28s cubic-bezier(.2,.9,.3,1); box-shadow: 0 20px 40px rgba(11,17,34,0.06); }

    /* small utility */
    .muted-small { color:var(--muted); font-weight:500; }
    .section-cta { text-align:center; margin: 28px 0; }

    /* === registration styles (modern & mobile-friendly) === */
    .reg-section { padding: 48px 18px; background: linear-gradient(135deg,#f8fbff,#eef6ff); }
    .reg-card { max-width: 1100px; margin: 0 auto; border-radius: 14px; overflow: hidden; display:flex; gap:0; box-shadow: 0 18px 44px rgba(11,17,34,0.06); }
    .reg-left { flex:1.2; padding:34px; background: linear-gradient(180deg,#fff,#f8fbff); }
    .reg-right { width:360px; background: linear-gradient(180deg,#0b1226,#091022); color:#fff; padding:28px 24px; display:flex; flex-direction:column; gap:16px; }
    .step-pill { display:inline-block; padding:8px 12px; border-radius:999px; background:#eef4ff; color:#0b1226; font-weight:700; }
    .form-step { display:none; }
    .form-step.active { display:block; }
    .skill-tags { display:flex; flex-wrap:wrap; gap:8px; margin-top:8px; }
    .skill-tags .tag { background:#eef2ff; padding:6px 10px; border-radius:999px; color:#0b2b8a; font-weight:600; }

    .btn-ghost { background:transparent; border:1px solid rgba(255,255,255,0.06); color:#fff; }

    /* OTP modal small tweak */
    .modal-content { border-radius:12px; }

    /* photo preview */
    .photo-preview { width:88px; height:88px; border-radius:8px; object-fit:cover; border:1px solid rgba(0,0,0,0.06); display:none; }

    @media (max-width: 992px) {
      .reg-card { flex-direction: column; }
      .reg-right { width:100%; order:2; }
    }
  </style>
</head>
<body>

  <!-- Header -->
  <header class="custom-header">
  <div class="container-fluid px-3">
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid px-0 d-flex align-items-center justify-content-between">
        <div class="brand-left">
  <a href="index.html" style="text-decoration: none; color: inherit; display: flex; align-items: center; gap: 8px;">
    <img src="assets/img/logo-jcrm.jpg" alt="Logo" />
    <span>JCRM TECHNOLOGIES</span>
  </a>
</div>
          <button class="navbar-toggler ms-auto" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"><span>
          </button>
        </div>
      </nav>
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark navbar-section">
      <div class="container-fluid justify-content-center">
        <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
          <ul class="navbar-nav text-center">
            <li class="nav-item"><a class="nav-link" href="index.html">HOME</a></li>
            <li class="nav-item"><a class="nav-link" href="erp-solutions.html">ERP SOLUTIONS</a></li>
            <li class="nav-item"><a class="nav-link" href="our-team.html">OUR TEAM</a></li>
            <li class="nav-item"><a class="nav-link" href="join-us.html">JOIN US</a></li>
            <li class="nav-item"><a class="nav-link" href="about-us.html">ABOUT US</a></li>
            <li class="nav-item"><a class="nav-link" href="contact-us.html">CONTACT US</a></li>
          </ul>
        </div>
      </div>
    </nav>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="container">
      <h1>Product-Based ERP Software Company</h1>
      <p class="lead">JCRM Technologies is a product-based IT company offering cutting-edge ERP solutions like LMS, HR, Hospital, Gym, Inventory, Cab Booking, Food Delivery, and E-Commerce systems. We also provide registration and placement support for various IT roles to help individuals grow in the tech industry.</p>
    </div>
  </section>

  <!--ASSISTANT HERO -->
  <section class="assistant-hero" aria-label="Overview highlight">
    <div class="inner container" data-aos="fade-up">
      <div>
        <h2>Shape the future with us — build industry-ready ERP solutions and grow your career through hands-on IT training, internships, and placements.</h2>
        <p>Your career starts here — work on real ERP innovations and gain the skills, mentorship, and opportunities to excel in today’s tech world.</p>
        <div class="cta">
          <a class="btn-primary-s" href="#contact" role="button">Join us</a>
          <a class="btn-ghost-s" href="contact-us.html">Contact Us</a>
        </div>
      </div>
    </div>
  </section>

  <!-- Registration UI -->
  <section class="reg-section">
    <div class="reg-card" role="region" aria-labelledby="joinTitle">
      <div class="reg-left">
        <div class="d-flex align-items-center justify-content-between">
          <div>
            <div class="step-pill">Internship Candidate Registration</div>
            <div class="text-muted small mt-2">Step-by-step registration with email OTP verification.</div>
          </div>
          <div class="text-muted small text-end">
            <div>Progress</div>
            <div id="progressText">Step 1 of 5</div>
          </div>
        </div>

        <div class="mt-4">
          <!-- Step 1 -->
          <div class="form-step active" data-step="1" id="step-1">
            <h4 id="joinTitle">Step 1 — Basic Info</h4>
            <div class="row g-3 mt-2">
              <div class="col-md-6">
                <label class="form-label">Full Name</label>
                <input id="fullName" class="form-control" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">Email</label>
                <input id="email" type="email" class="form-control" required>
              </div>
              <div class="col-md-6">
                <label class="form-label">Password</label>
                <input id="password" type="password" class="form-control" minlength="6" required>
                <small class="text-muted">Minimum 6 characters.</small>
              </div>
            </div>
          </div>

          <!-- Step 2 -->
          <div class="form-step" data-step="2" id="step-2">
            <h4>Step 2 — Profile Details</h4>
            <div class="row g-3 mt-2">
              <div class="col-md-6"><label class="form-label">College / University</label><input id="college" class="form-control"></div>
              <div class="col-md-6"><label class="form-label">Major / Field of Study</label><input id="major" class="form-control"></div>

              <div class="col-md-4">
                <label class="form-label">Current Year</label>
                <input id="yearOfStudy" list="yearOptions" class="form-control" placeholder="Type or choose...">
                <datalist id="yearOptions">
                  <option value="Freshman"></option>
                  <option value="Sophomore"></option>
                  <option value="Junior"></option>
                  <option value="Senior"></option>
                  <option value="Graduate"></option>
                  <option value="Alumni"></option>
                </datalist>
              </div>

              <!-- Expected Graduation -->
              <div class="col-md-4"><label class="form-label">Expected Graduation</label><input id="gradDate" type="text" class="form-control" placeholder="e.g., May 2026 or 'Completed' or 'N/A'"></div>
            </div>
          </div>

          <!-- Step 3 -->
          <div class="form-step" data-step="3" id="step-3">
            <h4>Step 3 — Internship Interests</h4>
            <div class="row g-3 mt-2">
              <div class="col-md-6">
                <label class="form-label">Preferred Industry</label>
                <select id="industry" class="form-select">
                  <option>Tech</option><option>Finance</option><option>Marketing</option><option>Education</option><option>Healthcare</option><option>Other</option>
                </select>
              </div>
              <div class="col-md-6"><label class="form-label">Preferred Location</label>
                <select id="locationPref" class="form-select"><option>Remote</option><option>On-site</option><option>Hybrid</option></select>
              </div>
              <div class="col-12 mt-2"><label class="form-label">Availability</label>
                <input id="availability" class="form-control" placeholder="e.g., Jun–Aug 2025 or Fall 2025">
              </div>
            </div>
          </div>

          <!-- Step 4 -->
          <div class="form-step" data-step="4" id="step-4">
            <h4>Step 4 — Resume, Photo & Skills</h4>
            <div class="row g-3 mt-2">
              <div class="col-12">
                <label class="form-label">Upload Resume (optional)</label>
                <input id="resume" type="file" accept=".pdf,.doc,.docx" class="form-control">
              </div>

              <div class="col-md-6">
                <label class="form-label">Upload Photo (optional)</label>
                <input id="photo" type="file" accept="image/*" class="form-control">
                <img id="photoPreview" class="photo-preview" alt="photo preview" />
              </div>

              <div class="col-12">
                <label class="form-label">Key Skills (comma separated)</label>
                <input id="skillsInput" class="form-control" placeholder="e.g., JavaScript, React, Node.js">
                <div class="skill-tags" id="skillTags" aria-live="polite"></div>
              </div>
            </div>
          </div>

          <!-- Step 5 -->
          <div class="form-step" data-step="5" id="step-5">
            <h4>Step 5 — Review & Submit</h4>
            <div class="mt-3" id="reviewArea"></div>
            <div class="form-text mt-2">We will send an OTP to your email for verification. After verification you can access your dashboard.</div>
          </div>
        </div>

        <div class="d-flex justify-content-between mt-4">
          <button id="prevBtn" class="btn btn-outline-secondary">← Back</button>
          <button id="nextBtn" class="btn btn-primary">Next →</button>
        </div>
      </div>

      <aside class="reg-right">
        <div>
          <h5 class="mb-1">Why Intern with JCRM?</h5>
          <ul style="list-style:disc; margin-left:16px; color: #e6eefc;">
            <li>Hands-on projects & mentorship</li>
            <li>100% placement assistance</li>
            <li>Work on real ERP products</li>
            <li>Remote & on-site opportunities</li>
          </ul>
        </div>

        <div>
          <h6 class="mt-2">Quick tips</h6>
          <ol style="padding-left:16px; color:#cfe0ff;">
            <li>Use a professional email</li>
            <li>Keep skills concise</li>
            <li>Resume boosts your chances</li>
          </ol>
        </div>

        <div class="mt-auto text-center">
          <a class="btn btn-ghost btn-sm mb-1" href="privacy.html">Privacy & Terms</a><br/>
          <a class="btn btn-outline-light btn-sm" href="contact-us.html">Contact Support</a>
        </div>
      </aside>
    </div>
  </section>

  <!-- OTP Modal (polished) -->
  <div class="modal fade" id="otpModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Verify your email</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p>Enter the 6-digit code we sent to <strong id="otpEmailText"></strong></p>
          <input id="otpInput" class="form-control form-control-lg mb-2" maxlength="6" placeholder="123456" inputmode="numeric">
          <div id="otpMsg" class="form-text mb-2">We sent a code — check your inbox.</div>
          <div class="d-flex justify-content-between align-items-center">
            <small id="otpTimer" class="text-muted">Expires in 10:00</small>
            <button id="resendOtp" class="btn btn-sm btn-link">Resend</button>
          </div>
        </div>
        <div class="modal-footer">
          <button id="verifyOtpBtn" class="btn btn-primary">Verify & Finish</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Contact CTA -->
<section id="contact" class="bg-light py-5 text-center">
  <div class="container">
    <h2 class="section-title">Get in Touch</h2>
    <p>Have a question or want a demo? Reach out to us now!</p>
    <a href="contact-us.html" class="btn btn-primary">Contact Us</a>
  </div>
</section>

<!-- Footer -->
<footer class="footer text-center">
  <div class="container">
    <p class="mb-2">&copy; 2025 JCRM Technologies. All rights reserved.</p>
    <div class="social-icons">
      <a href="#"><i class="fab fa-facebook-f"></i></a>
      <a href="#"><i class="fab fa-instagram"></i></a>
      <a href="#"><i class="fab fa-linkedin-in"></i></a>
      <a href="#"><i class="fab fa-youtube"></i></a>
      <a href="#"><i class="fab fa-whatsapp"></i></a>
    </div>
  </div>
</footer>

  <!-- SCRIPTS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // ===== SET API BASE =====
    // Set backend, e.g. "http://localhost:4000" or "" if hosting same origin
    const API_BASE = ''; // <-- change when connecting backend

    // local state
    let step = 1;
    const totalSteps = 5;
    const state = { data:{}, skills:[], resumeFile: null, photoFile: null, photoPreviewUrl: '' };

    function updateUI(){
      document.querySelectorAll('.form-step').forEach(el=>el.classList.remove('active'));
      document.getElementById('step-'+step).classList.add('active');
      document.getElementById('progressText').textContent = `Step ${step} of ${totalSteps}`;
      document.getElementById('nextBtn').textContent = step === totalSteps ? 'Submit & Verify' : 'Next →';
    }

    // skills tag handling (update on input)
    const skillsInput = document.getElementById('skillsInput');
    const skillTags = document.getElementById('skillTags');
    skillsInput?.addEventListener('input', () => {
      state.skills = skillsInput.value.split(',').map(s=>s.trim()).filter(Boolean);
      renderSkillTags();
    });
    function renderSkillTags(){
      skillTags.innerHTML = '';
      state.skills.forEach(s=>{
        const el = document.createElement('span');
        el.className='tag';
        el.textContent = s;
        skillTags.appendChild(el);
      });
    }

    // photo preview handling
    const photoEl = document.getElementById('photo');
    const photoPreview = document.getElementById('photoPreview');
    photoEl?.addEventListener('change', ()=>{
      if (photoEl.files && photoEl.files[0]){
        state.photoFile = photoEl.files[0];
        state.data.photoName = state.photoFile.name;
        try { state.photoPreviewUrl = URL.createObjectURL(state.photoFile); photoPreview.src = state.photoPreviewUrl; photoPreview.style.display = 'block'; } catch(e){}
      } else { state.photoFile = null; state.data.photoName = ''; state.photoPreviewUrl = ''; photoPreview.style.display = 'none'; }
    });

    // resume handling (store file)
    const resumeEl = document.getElementById('resume');
    resumeEl?.addEventListener('change', ()=>{
      if (resumeEl.files && resumeEl.files[0]){ state.resumeFile = resumeEl.files[0]; state.data.resumeName = state.resumeFile.name; }
      else { state.resumeFile = null; state.data.resumeName = ''; }
    });

    // navigation buttons
    document.getElementById('nextBtn').addEventListener('click', async ()=>{
      if (step < totalSteps) {
        if (!validateStep(step)) return;
        if (step === totalSteps - 1) buildReview();
        step++; updateUI();
      } else {
        if (!validateStep(step)) return;
        await submitRegistration();
      }
    });
    document.getElementById('prevBtn').addEventListener('click', ()=>{ if (step>1) { step--; updateUI(); } });

    function validateStep(s){
      if (s===1) {
        const name = document.getElementById('fullName').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        if (!name || !email || !password) { alert('Please fill name, email and password.'); return false; }
        state.data.fullName = name; state.data.email = email; state.data.password = password;
      }
      if (s===2) {
        state.data.college = document.getElementById('college').value.trim();
        state.data.major = document.getElementById('major').value.trim();
        state.data.yearOfStudy = document.getElementById('yearOfStudy').value.trim();
        state.data.gradDate = document.getElementById('gradDate').value.trim();
      }
      if (s===3) {
        state.data.industry = document.getElementById('industry').value;
        state.data.locationPref = document.getElementById('locationPref').value;
        state.data.availability = document.getElementById('availability').value.trim();
      }
      if (s===4) {
        // resume & skills already handled by change listeners
        state.data.skills = state.skills || [];
      }
      return true;
    }

    function buildReview(){
      const area = document.getElementById('reviewArea'); const d = state.data;
      const photoHtml = state.photoPreviewUrl ? `<img src="${state.photoPreviewUrl}" class="photo-preview" style="display:block;" alt="photo" />` : '';
      area.innerHTML = `
        <div class="card p-3">
          <div class="d-flex gap-3 align-items-center">
            <div>${photoHtml}</div>
            <div>
              <h5 style="margin-bottom:4px;">${d.fullName || ''}</h5>
              <div class="text-muted small">${d.email || ''} • ${d.college || ''}</div>
            </div>
          </div>
          <hr/>
          <div><strong>Major:</strong> ${d.major || ''}</div>
          <div><strong>Year:</strong> ${d.yearOfStudy || ''} • <strong>Grad:</strong> ${d.gradDate || ''}</div>
          <div><strong>Industry:</strong> ${d.industry || ''} • <strong>Location:</strong> ${d.locationPref || ''}</div>
          <div><strong>Availability:</strong> ${d.availability || ''}</div>
          <div><strong>Skills:</strong> ${(d.skills||[]).join(', ')}</div>
          <div><strong>Resume:</strong> ${d.resumeName || '—'}</div>
          <div style="margin-top:8px; font-size:13px; color:#666"><em>Make sure your email is correct — OTP will be sent for verification.</em></div>
        </div>
      `;
    }

    async function submitRegistration(){
      try {
        // Build payload and attach files if present
        const payload = { data: state.data };

        // Use FormData so resume/photo can be uploaded when backend exists
        const form = new FormData();
        form.append('data', JSON.stringify(payload.data));
        if (state.resumeFile) form.append('resume', state.resumeFile);
        if (state.photoFile) form.append('photo', state.photoFile);

        const res = await fetch((API_BASE || '') + '/api/register', {
          method:'POST', body: form
        });
        const json = await res.json().catch(()=>({}));
        if (!res.ok) {
          alert(json.error || 'Registration failed (no backend?)');
          return;
        }
        // show OTP modal
        showOtpModal(state.data.email);
      } catch (err) {
        console.error(err); alert('Registration error');
      }
    }

    // OTP modal
    const otpModalEl = document.getElementById('otpModal');
    const otpModal = new bootstrap.Modal(otpModalEl);
    let otpExpiryTimer = null; let otpExpiryAt = null;

    function showOtpModal(email){
      document.getElementById('otpEmailText').textContent = email;
      document.getElementById('otpMsg').textContent = 'We sent a 6-digit code to your email.';
      document.getElementById('otpInput').value = '';
      otpExpiryAt = Date.now() + (10*60*1000);
      startOtpTimer();
      otpModal.show();
    }
    function startOtpTimer(){
      clearInterval(otpExpiryTimer);
      otpExpiryTimer = setInterval(()=>{
        const diff = otpExpiryAt - Date.now();
        if (diff <= 0) { document.getElementById('otpTimer').textContent = 'Code expired'; clearInterval(otpExpiryTimer); return; }
        const mm = String(Math.floor(diff/60000)).padStart(2,'0'), ss = String(Math.floor((diff%60000)/1000)).padStart(2,'0');
        document.getElementById('otpTimer').textContent = `Expires in ${mm}:${ss}`;
      }, 500);
    }

    document.getElementById('resendOtp').addEventListener('click', async ()=>{
      try {
        const form = new FormData(); form.append('data', JSON.stringify(state.data));
        const res = await fetch((API_BASE || '') + '/api/register', { method:'POST', body: form });
        const j = await res.json().catch(()=>({}));
        if (!res.ok) return alert(j.error || 'Resend failed');
        document.getElementById('otpMsg').textContent = 'OTP resent — check your email.';
        otpExpiryAt = Date.now() + (10*60*1000); startOtpTimer();
      } catch (err) { console.error(err); alert('Resend failed'); }
    });

    document.getElementById('verifyOtpBtn').addEventListener('click', async ()=>{
      const otpVal = document.getElementById('otpInput').value.trim();
      if (!otpVal) return alert('Enter OTP');
      try {
        const res = await fetch((API_BASE || '') + '/api/verify-otp', { method:'POST', headers:{ 'Content-Type':'application/json' }, body: JSON.stringify({ email: state.data.email, otp: otpVal }) });
        const json = await res.json().catch(()=>({}));
        if (!res.ok) { document.getElementById('otpMsg').textContent = json.error || 'Verify failed'; return; }
        document.getElementById('otpMsg').textContent = 'Verified — redirecting to dashboard...';
        otpModal.hide();
        setTimeout(()=> window.location.href = '/dashboard.html', 900);
      } catch (err) { console.error(err); document.getElementById('otpMsg').textContent = 'Verification failed'; }
    });

    // initial UI
    updateUI();
  </script>
</body>
</html>
